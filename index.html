<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sana √ñzel Bir S√ºrpriz ‚ù§Ô∏è</title>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <style>
        :root {
            --color-env: linear-gradient(135deg, #ff4d6d, #ff8fa3); 
            --color-env2: #ff758f; 
            --color-paper: #fff5f7;
            --color-text: #c9184a;
        }

        body {
            background-color: #0a0a0a;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            font-family: 'Brush Script MT', cursive;
            overflow: hidden;
        }

        h1 {
            color: #ff8fa3;
            margin-bottom: 50px;
            font-size: 2.5rem;
            text-align: center;
            text-shadow: 0 0 10px rgba(255, 77, 109, 0.5);
        }

        /* Yan Fotoƒüraflar */
        .side-photo {
            position: absolute;
            bottom: 15%;
            width: 150px;
            height: 190px;
            background: white;
            padding: 8px 8px 25px 8px;
            box-shadow: 0 15px 30px rgba(0,0,0,0.8);
            z-index: 5;
            opacity: 0;
            visibility: hidden; /* Tamamen gizle */
            transition: all 1s ease-in-out;
        }

        .side-photo img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .photo-left { left: 5%; transform: rotate(-15deg) translateY(100px); }
        .photo-right { right: 5%; transform: rotate(15deg) translateY(100px); }

        /* Zarf a√ßƒ±lƒ±nca fotoƒüraflarƒ± g√∂ster (JS ile tetiklenecek) */
        .show-photos .photo-left { 
            opacity: 1; 
            visibility: visible;
            transform: rotate(-10deg) translateY(0); 
        }
        .show-photos .photo-right { 
            opacity: 1; 
            visibility: visible;
            transform: rotate(10deg) translateY(0); 
        }

        .container { position: relative; z-index: 10; }

        .envelope-wrapper {
            position: relative;
            width: 280px;
            height: 180px;
            background: var(--color-env);
            border-radius: 0 0 10px 10px;
            box-shadow: 0 15px 45px rgba(255, 77, 109, 0.6);
            cursor: pointer;
        }

        .envelope-wrapper::before {
            content: "";
            position: absolute;
            z-index: 5;
            border-top: 90px solid transparent;
            border-right: 140px solid var(--color-env2);
            border-bottom: 90px solid var(--color-env2);
            border-left: 140px solid #ff8fa3;
            border-radius: 0 0 10px 10px;
        }

        .lid {
            position: absolute;
            top: 0; left: 0;
            border-top: 100px solid #ff4d6d;
            border-left: 140px solid transparent;
            border-right: 140px solid transparent;
            transform-origin: top;
            transition: transform 0.6s ease;
            z-index: 6;
        }

        .paper {
            position: absolute;
            bottom: 10px; left: 20px;
            width: 240px; height: 160px;
            background: var(--color-paper);
            text-align: center;
            padding: 10px;
            transition: all 0.8s ease-in-out;
            z-index: 4;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }

        .paper h2 { color: var(--color-text); font-size: 1.1rem; opacity: 0; }

        .container.open .lid { transform: rotateX(180deg); z-index: 2; }
        .container.open .paper { transform: translateY(-120px); }
        .container.open .paper.clicked { transform: translateY(-200px) scale(1.1); z-index: 12; }
        .container.open .paper.clicked h2 { opacity: 1; }

        .heart-svg { width: 40px; fill: #ff4d6d; animation: pulse 1.5s infinite; }
        @keyframes pulse { 0% { transform: scale(1); } 50% { transform: scale(1.1); } 100% { transform: scale(1); } }

        .instruction {
            margin-top: 25px;
            color: white;
            font-family: sans-serif;
            font-size: 0.8rem;
            opacity: 0.8;
        }
    </style>
</head>
<body id="mainBody">

    <h1>Sana √ñzel Bir S√ºrpriz ‚ù§Ô∏è</h1>

    <audio id="mySong" loop preload="auto">
        <source src="muzik.mp3" type="audio/mpeg">
    </audio>

    <div class="side-photo photo-left">
        <img src="sol.png" alt="Biz">
    </div>
    <div class="side-photo photo-right">
        <img src="sag.jpg" alt="Biz">
    </div>

    <div class="container" id="envelopeContainer">
        <div class="envelope-wrapper" onclick="toggleEnvelope()">
            <div class="lid"></div>
            <div class="paper" id="mainPaper" onclick="showMessage(event)">
                <svg class="heart-svg" viewBox="0 0 32 32">
                    <path d="M16 28.5L14.1 26.6C7.2 20.4 2.5 16.2 2.5 11C2.5 6.8 5.8 3.5 10 3.5C12.4 3.5 14.7 4.6 16.2 6.3C17.7 4.6 20 3.5 22.3 3.5C26.5 3.5 29.8 6.8 29.8 11C29.8 16.2 25.1 20.4 18.2 26.6L16 28.5Z"/>
                </svg>
                <h2 id="msgText">Sevgililer g√ºn√ºn kutlu olsun bebeƒüim</h2>
            </div>
        </div>
    </div>
    <div class="instruction">Zarfa tƒ±kla ‚ù§Ô∏è</div>

    <script>
        let isOpen = false;
        const song = document.getElementById('mySong');

        function toggleEnvelope() {
            if (!isOpen) {
                document.getElementById('envelopeContainer').classList.add('open');
                // Fotoƒüraflarƒ± g√∂steren sƒ±nƒ±fƒ± body'e ekle
                document.body.classList.add('show-photos');
                isOpen = true;
                
                // M√ºzik D√∂ng√ºs√ºn√º Garanti Et
                song.loop = true; 
                song.play().catch(e => console.log("M√ºzik ba≈ülatƒ±lamadƒ±:", e));
                
                flowerBurst();
            }
        }

        function showMessage(e) {
            e.stopPropagation();
            document.getElementById('mainPaper').classList.add('clicked');
            confetti({ particleCount: 100, spread: 70, origin: { y: 0.3 } });
        }

        function flowerBurst() {
            confetti({
                origin: { y: 0.6 },
                zIndex: 999,
                particleCount: 150,
                spread: 160,
                velocity: 45,
                scalar: 2,
                shapes: ['text'],
                shapeOptions: {
                    text: { value: ['üå∏', 'üåπ', 'üå∑', 'üå∫', '‚ù§Ô∏è', '‚ú®'] }
                }
            });
        }

        // M√ºzik biterse zorla tekrar ba≈ülat (Ekstra Garanti)
        song.onended = function() {
            song.play();
        };
    </script>
</body>
</html>
